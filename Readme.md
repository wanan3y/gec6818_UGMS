# 智能车库管理系统

## 项目概述

智能车库管理系统是一个基于嵌入式Linux的车辆管理解决方案，集成了摄像头、LCD显示屏、触摸屏和RFID读卡器等硬件设备，实现了车辆入库、出库的自动化管理。系统使用车牌识别技术和RFID卡识别两种方式来识别车辆，并通过SQLite数据库存储和管理车辆信息。

## 系统功能

- **车辆入库管理**：通过摄像头拍照识别车牌或RFID卡识别，记录车辆入库时间和相关信息
- **车辆出库管理**：识别出库车辆，计算停车时长和费用，更新数据库记录
- **实时显示**：在LCD屏幕上显示车辆信息、操作界面和系统状态
- **触摸交互**：通过触摸屏进行人机交互，选择操作模式和功能
- **数据存储**：使用SQLite数据库存储车辆信息、入库和出库记录

## 系统架构

### 硬件组件

- 嵌入式Linux开发板
- 摄像头模块
- LCD显示屏
- 触摸屏
- RFID读卡器
- 串口通信模块

### 软件组件

- **主控模块**：协调各个功能模块的工作，处理用户交互
- **摄像头模块**：控制摄像头拍照，获取图像数据
- **显示模块**：在LCD屏幕上显示界面和信息
- **触摸屏模块**：获取用户触摸输入
- **RFID模块**：读取RFID卡信息
- **车牌识别模块**：识别车辆车牌号码
- **数据库模块**：管理车辆信息和记录

## 核心文件说明

- **main.c**：系统主程序，初始化硬件和创建线程
- **camera.c**：摄像头控制和图像处理
- **lcd.c**：LCD显示屏控制
- **touch.c**：触摸屏控制
- **rfid.c**：RFID读卡器控制
- **mySQLite.c**：SQLite数据库操作
- **main.cpp**：车牌识别程序（ALPR）

## 编译与运行

### 编译

项目使用Makefile进行编译管理。在项目根目录下执行以下命令进行编译：

```bash
make
```

编译后的可执行文件将生成在`bin`目录下。

### 运行

在目标设备上运行以下命令启动系统：

```bash
./bin/Car
```

## 系统工作流程

1. 系统启动后初始化各个硬件模块
2. 主界面显示入库和出库两个选项
3. 用户通过触摸屏选择操作模式
4. 入库流程：
   - 系统激活摄像头拍照或等待RFID卡识别
   - 识别车牌号码或读取RFID卡号
   - 记录车辆信息和入库时间到数据库
   - 显示入库成功信息
5. 出库流程：
   - 系统激活摄像头拍照或等待RFID卡识别
   - 识别车牌号码或读取RFID卡号
   - 查询数据库获取入库信息
   - 计算停车时长和费用
   - 更新数据库记录
   - 显示出库成功信息和费用

## 依赖库

- pthread：多线程支持
- sqlite3：数据库操作
- jpeg：图像处理
- OpenCV：车牌识别（ALPR模块）

## 注意事项

- 系统需要在支持摄像头、LCD和RFID的嵌入式Linux设备上运行
- 车牌识别功能需要预先训练的模型（未包含在代码库中）
- 数据库文件会自动创建在系统运行目录下

## 未来改进

- 添加网络通信功能，实现远程监控和管理
- 优化车牌识别算法，提高识别准确率
- 增加用户管理和权限控制
- 添加数据统计和报表功能
- 实现与其他系统的集成对接